name: Build and Artifact Generation

on:
  workflow_call:  # This workflow can be called from other workflows

jobs:
  build-artifact:
    runs-on: self-hosted

    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      # Build the project with Maven
      - name: Build with Maven
        run: mvn clean install

      # Upload the built artifact (e.g., .jar files) with versioning based on commit SHA
      - name: Upload Artifacts with Versioning
        uses: actions/upload-artifact@v3
        with:
          name: my-app-artifact-${{ github.sha }}  # Artifact version based on commit SHA
          path: target/*.jar  # Path to the built artifact (e.g., JAR file or other build outputs)
